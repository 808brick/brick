<head>
</head>
<body>
  <h1> Test Application ROS </h1>  <br><br>
  <h3> Test Ros Subscriber</h3>
  <div id="html-topic-div"></div>
  <div id="test_image_div"></div>
<ul>

</ul>

  <br><br>
  <button id="Refresh IPC">Refresh IPC</button>
  <br>
  <iframe style="width:100%; height:400px;"  src="http://localhost:8080/stream?topic=/usb_cam/image_raw&type=ros_compressed"></iframe>
  <iframe style="width:100%; height:400px;"  src="http://localhost:8080/stream?topic=/usb_cam/image_raw&type=ros_compressed"></iframe>

<!--   <button id="rostopic button">Rostopic list</button>
  <button id="roscore button">Start roscore</button>
  <button id="roscore stop">Stop roscore</button> -->


</body>



<script>
	const electron = require('electron');
	const { ipcRenderer } = electron;
	// var cv = require('opencv4nodejs');
 //  	// var path = require('path');
 //  	var fs = require('fs');
  	// console.log(path.resolve('public/images', '256_logo.png'));
  	// var selectedImgBGR = cv.imread(path.resolve('public/images', '256_logo.png')).resizeToMax(500);
  	// renderImage(selectedImgBGR, document.getElementById('test_image_div'));
	const topic_div = document.getElementById('html-topic-div');
	const todo_list = document.querySelector('ul');
	//Init IPC connection
	// ipcRenderer.send('ipc_init', 'IPC Started');
	// document.getElementById("Refresh IPC").onclick = function(){
	// 	ipcRenderer.send('ipc_init', 'IPC Refreshed');
	// 	console.log("IPC Refreshed");
	// };
	// 	document.getElementById("rostopic button").onclick = function(){
	// 	ipcRenderer.send('rostopic_list', 'send_rostopics');
	// 	console.log("ROS topics requested");
	// };

	// document.getElementById("roscore button").onclick = function(){
	// 	ipcRenderer.send('roscore', 'start roscore');
	// 	console.log("roscore start requested");
	// };
	// document.getElementById("roscore stop").onclick = function(){
	// 	ipcRenderer.send('roscore_stop', 'start roscore');
	// 	console.log("roscore stop requested");
	// };
	// document.getElementById('Refresh IPC').click();

	// ipcRenderer.on('rostopic_list', (event, received_info) => {

	// 	const li = document.createElement('p');
 //    	const text = document.createTextNode(received_info);
 //    	todo_list.innerHTML = '';
 //    	li.appendChild(text);
 //    	todo_list.appendChild(li);
	// });
	
	ipcRenderer.on('test_ros_topic', (event, received_info) => {  
		// const p = document.createElement('p');
		// const text = document.createTextNode(received_info);
		const li = document.createElement('p');
    	const text = document.createTextNode(received_info);
    	todo_list.innerHTML = '';
    	li.appendChild(text);
    	todo_list.appendChild(li);
    	// todo_list.innerHTML = li;
		// p.appendChild(text);
		// topic_div.appendChild(p);
		
	});
</script>